language: c # not really, but using make

# pandoc is used to generate the output files
# the pandoc version in the package management system is a tad old though
# so tables don't turn out nice
# install a recent version locally
before_install:
  - wget https://github.com/jgm/pandoc/releases/download/1.19.2.1/pandoc-1.19.2.1-1-amd64.deb
  - ar p pandoc-1.19.2.1-1-amd64.deb data.tar.gz | tar zx ./usr/bin/pandoc --strip-components 3

# pandoc needs LaTeX for pdf output
# here the versions from the package system are ok
addons:
  apt:
    packages:
      texlive
      lmodern

# the build step, details in the Makefile
script:
  PANDOC=./pandoc make all

# send notifications to Slack-channel #travis-ci after each build
notifications:
  slack:
    secure: p1/NtVtDUeaDIPrz4bStS+VuxhcWAp65gNg4fHpjYu0TO5ddM+EcDKrW5GRUelZE/Hgjf7Zc3h+Tz6Y2gs7IrWTB6PO6h6vDEQ5/ViSRRiWFsWdSt28MYsjegITc4Rr5j6TyRdqik2xu2N1yRRsg1i5uVBzFWta5zpF3iawgSWtLt8HjgcMu1ciTN636hNQjA3g7OnqmytIGrplxp8Vh/YDgrBaZbAve77Lp7Y4r1Vw+w4SR/0O9KBgv7iyEQKZegFRhgPuOcG39J+rvNriyYkWDl5RjYU3/V4jO037KuAdjS+fZyU82Th858F9dN5P3alTc3jp3Kea5l8JnEPMObozoThWiiv/czeUU0SU4ZyM9/1B4200up7iEFLFPS1BIR4nefEnY8vYIi8My6vdiUsn0wGxSprk/GC4tHk/VBiFXjbP4hzFXUKsyrbXAg8h4tZ6dEK5nDTQnIf+pjbXpBXg4scG+tIotsNQVhLvVK2O6q1Jg8JnwMDSXxpgbE6gUg7/Ngdei+nYgnLwyjTJcwVq9q9nlMEhgmsYd0bitsstsJYJv9b75LFs+REzzF8O4PX/qXnXRB0XHdy8w7ECVuU5mrMjRDuxeesqR8+vc/WXcSr1O25GLmBC/77KT4U88Zp3UbTl1ho0KptdGRuTt1JeyMdS7k2y4d+yr8y4JyPw=

# for tagged versions, deploy the built files to github
#deploy:
#  provider: releases
#  api_key:
#    secure: $GH_TOKEN
#  file_glob: true
#  file: out/*
#  skip_cleanup: true
#  on:
#    tags: true
